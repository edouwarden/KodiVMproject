d-i preseed/include string preseed.cfg

d-i debconf/priority string critical
d-i debconf/language string fr
d-i debconf/country string FR
d-i debconf/locale string fr_FR.UTF-8

d-i netcfg/choose_interface select auto
d-i netcfg/dhcp_timeout string 60

d-i passwd/root-password password rootpassword
d-i passwd/root-password-again password rootpassword

tasksel tasksel/first multiselect standard
d-i pkgsel/include string openssh-server kodi
d-i pkgsel/upgrade select safe-upgrade
d-i grub-installer/only_debian boolean true

d-i time/zone string Europe/Paris
d-i clock-setup/utc boolean true
d-i clock-setup/ntp boolean true

d-i passwd/user-fullname string Utilisateur
d-i passwd/username string utilisateur
d-i passwd/user-password password userpassword
d-i passwd/user-password-again password userpassword
d-i user-setup/allow-password-weak boolean true
d-i user-setup/encrypt-home boolean false
d-i user-setup/autologin boolean true

d-i partman-auto/method string lvm
d-i partman-lvm/device_remove_lvm boolean true
d-i partman-lvm/confirm boolean true
d-i partman-auto-lvm/new_vg_name string kodivg
d-i partman-auto/expert_recipe string \
    kodipart :: \
        256 50% 512 50% $primary{ } $bootable{ } \
        method{ lvm } vg_name{ kodivg } \
        . \
    256 1000 1000000000 ext2 \
        $primary{ } $bootable{ } \
        method{ format } format{ } \
        use_filesystem{ } filesystem{ ext2 } \
        mountpoint{ /log } \
        .

d-i preseed/late_command string \
    wget https://raw.githubusercontent.com/edouwarden/KodiVMproject/main/install.sh; \
    chmod +x install.sh; \
    ./install.sh

d-i finish-install/reboot_in_progress note
